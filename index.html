<html ng-app="ADPChallenge">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="icon" type="image/png" href="favicon.png" />
    
    <title>ADP Challenge</title>
    
    <!-- Styles -->
    <link rel="stylesheet" type="text/css" media="screen" href="lib/bootstrap-4.0.0-dist/css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="css/app.css"/>

    <!-- Scripts -->
    <!-- <script src="lib/angular-1.5.9/angular.js"></script>
    <script src="lib/angular-1.5.9/angular-messages.js"></script> -->
    <script src="node_modules/angular/angular.js"></script>
    <script src="node_modules/angular-messages/angular-messages.js"></script>
    <script src="js/controllers/ADPChallengeCtrl.js"></script>
    <script src="js/services/publicRepositoriesService.js"></script>
    <script src="js/services/subscribersService.js"></script>
    <script src="js/filters/headerFilter.js"></script>
    <script src="js/filters/ellipsisFilter.js"></script>
    <script src="js/filters/paginationFilter.js"></script>
    <script src="js/config/configValue.js"></script>
    <script src="js/app.js"></script>

</head>
<body ng-controller="ADPChallengeCtrl">

    <header>
        <div class="container">
            <div class="d-flex d-flex justify-content-center title_top">
                <h1>{{title}}</h1>
            </div>

            <!-- Sum of subscribers -->
            <div class="d-flex d-flex justify-content-around">
                <h3>Total de Subscribers</h3>
                <h3>{{countSubscribersSelected}}</h3>
            </div>
            <hr>
        </div>
    </header>

    <section>
        <div class="container" ng-if="publicRespositories.length > 0">

            <!-- Filter e active pagination table -->
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 d-flex flex-wrap">
                <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 input_top d-flex">
                    <input type="checkbox" ng-model="paginationActive" ng-change="activePagination()" aria-label="Paginação" id="actPaginate" class="inputPagination">
                    <label for="actPaginate"> Ativar Paginação </label>               
                </div>
                <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 input_top">
                    <input type="text" class="form-control" ng-model="searchRepo" placeholder="Pesquisar...">
                </div>
            </div>
    
            <!-- Table of repositories -->
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">

                <!-- Grid of table -->
                <table class="table table-responsive">
                    <tr>
                        <th ng-click="sortWith(key)" ng-repeat="(key, val) in publicRespositories[0]">{{key | nameHeader}}</th>
                    </tr>
                    <tr class="tableRow" ng-repeat="repo in publicRespositories | filter: searchRepo | orderBy:sortField:sortDirection | pagination:[paginationRow,tableLimit] | limitTo:tableLimit" ng-click="clickRow(repo)" ng-class="{'selectedRow': repo.selected}">
                        <td ng-repeat="(key, val) in repo">
                            <span ng-if="key != 'owner'">{{val | ellipsis:20}}</span>
                            <span ng-if="key === 'owner'">{{repo.owner.login | ellipsis:30}}</span>
                        </td>
                    </tr>
                </table>
    
                <!-- Paginator -->
                <nav class="d-flex d-flex justify-content-center" aria-label="Paginação" ng-if="paginationActive">
                    <ul class="pagination">
                        <li class="page-item page-link" ng-click="goToPage(0)">Primeira</a></li>
                        <li class="page-item page-link" ng-click="goToPage(page - 1)" ng-repeat="page in paginationButtonsList" ng-if="page < (paginationList.length)  && page > 1">{{page}}</a></li>
                        <li class="page-item page-link" ng-click="goToPage(paginationList.length - 1)">Última</a></li>
                    </ul>
                </nav>
            </div>
            <hr>
        </div>
    </section>

    <footer>
        <div class="container">

            <!-- Sum of repositories -->
            <div class="d-flex d-flex justify-content-around">
                <h3>Repositórios Selecionados</h3>
                <h3> {{countRepositoriesSelected}}</h3>
            </div>
        </div>
    </footer>

</body>
</html>